(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{93607:function(e,t,a){"use strict";var s=a(85893);a(67294);var r=a(99200),l=a(43472),n=a(94184),i=a.n(n);let d=e=>{let{field:t,fieldLabel:a,placeholder:n,errors:d,touched:o,required:c}=e;return(0,s.jsxs)(r.cw,{row:!0,children:[(0,s.jsxs)(r.__,{for:t,lg:2,children:[a,c&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsxs)(r.JX,{lg:10,children:[(0,s.jsx)(r.BZ,{children:(0,s.jsx)(r.II,{type:"tel",name:t,id:t,tag:l.gN,required:!0,className:i()({"is-invalid":o[t]&&d[t]}),placeholder:n||"Type here..."})}),(0,s.jsx)(l.Bc,{name:t,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})]})};t.Z=d},70297:function(e,t,a){"use strict";var s=a(85893);a(67294);var r=a(99200),l=a(43472),n=a(94184),i=a.n(n);let d=e=>{let{field:t,fieldLabel:a,placeholder:n,errors:d,touched:o,required:c}=e;return(0,s.jsxs)(r.cw,{row:!0,children:[(0,s.jsxs)(r.__,{for:t,lg:2,children:[a,c&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsxs)(r.JX,{lg:10,children:[(0,s.jsx)(r.BZ,{children:(0,s.jsx)(r.II,{type:"text",name:t,id:t,tag:l.gN,required:!0,className:i()({"is-invalid":o[t]&&d[t]}),placeholder:n||"Type here..."})}),(0,s.jsx)(l.Bc,{name:t,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})]})};t.Z=d},32271:function(e,t,a){"use strict";a.d(t,{Z:function(){return es}});var s=a(85893),r=a(67294),l=a(11163),n=a(13125),i=a(99010),d=a(99200),o=a(42763),c=a(96827),h=a(74201),m=a(49474),u=a(35337),_=a(584),x=a(20466),p=a(77349),f=a(7069),g=a(21593),v=a(54559),j=a(90811),b=a(10041),y=a(313),Z=a(42699),N=a(23855),w=a(95826),k=a(20784);let q=[4,5,6,7,8,9],S=[2,4],D={beginner_skipper:{value:"beginner_skipper",label:"beginner_skipper_label",days:4},initiation_sailing:{value:"initiation_sailing",label:"initiation_sailing_label",days:2},regatta:{value:"regatta",label:"regatta_label",days:5}};var I=a(96843),E=a(61973);a.e(775).then(a.t.bind(a,36775,23));let M=e=>{let{events:t,className:a,daysSelected:n,setDaysSelected:i,type:D,setTooManyDaysError:M}=e,{query:B}=(0,l.useRouter)(),{t:C}=(0,o.$G)("reservations"),[z,L]=(0,r.useState)(),[R,X]=(0,r.useState)(4),{messages:F,formats:O}=(0,r.useMemo)(()=>({messages:{previous:C("previous"),next:C("next"),today:C("today")},formats:{monthHeaderFormat:(e,t,a)=>{let s=a.format(e,"MMMM yyyy",t);return s.charAt(0).toUpperCase()+s.slice(1)}}}),[]);(0,r.useEffect)(()=>{X(D.days)},[D]),(0,r.useEffect)(()=>{let e=new Date;q.includes(e.getMonth())?L(e):L(new Date("".concat(e.getFullYear(),"-05-15")))},[]);let A=e=>{let t=e.event,a=0;return t.reservations.forEach(e=>a+=e.customer_forms.length),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:"en"===B.locale?t.title_en:t.title_fr}),(0,s.jsx)("div",{children:(0,y.Z)(e.start,(0,f.Z)(new Date,1))?C("event_finished"):C("places_left",{places_left:t.max_reservations-a})})]})},H=(0,r.useMemo)(()=>({event:A}),[]),J={en:w.Z,fr:k.Z},P=(0,c.lD)({format:h.Z,parse:u.Z,startOfWeek:()=>(0,_.Z)(new Date,{weekStartsOn:1}),getDay:x.Z,locales:J}),W=e=>{let a=[e.slots[0]];if(!q.includes(a[0].getMonth())||(0,y.Z)(a[0],(0,f.Z)(new Date,1)))return null;let s=t.filter(e=>(0,I.Z)((0,E.Z)(a[0],1),(0,N.Z)(e.start)))[0];if(s){let e=0;if(s.reservations.forEach(t=>e+=t.customer_forms.length),e>=s.max_reservations)return null}(0,j.Z)(a[0])?a=[a[0],(0,p.Z)(a[0],1)]:(0,b.Z)(a[0])&&(a=[a[0],(0,f.Z)(a[0],1)]);let r=[];if(a.length>1?(M(!1),r=(r=n.filter(e=>0!==(0,m.Z)(e,a[0]))).filter(e=>0!==(0,m.Z)(e,a[1]))):(M(!1),r=n.filter(e=>0!==(0,m.Z)(e,a[0]))),r.length===n.length){if(n.length+a.length>R)return M(!0),null;i(e=>e.concat(a))}else i(r)},G=e=>{(0,Z.Z)(e,(0,g.Z)(new Date,1))||(0,y.Z)(e,(0,v.Z)(new Date,3))||L(e)},U=e=>{if(q.includes(e.getMonth())&&!(0,y.Z)(e,(0,f.Z)(new Date,1))){if("regatta"===D.value&&!S.includes(e.getDay()))return{style:{background:"#e6e6e6"}};let t=n.every(t=>0!==(0,m.Z)(t,e));return{style:{background:t?"":"#C1E1C1"}}}return{style:{background:"#e6e6e6"}}},T=()=>({style:{background:"transparent",color:"red",zIndex:-1,pointerEvents:"none",textAlign:"center"}});return(0,s.jsx)(d.W2,{className:"mt-4",children:(0,s.jsx)(c.f,{events:t,className:a,localizer:P,style:{height:500},culture:B.locale,views:["month"],selectable:!0,onSelectSlot:W,dayPropGetter:U,eventPropGetter:T,components:H,onNavigate:G,date:z,messages:F,formats:O})})};var B=a(43472),C=a(74231),z=a(95570),L=a(94184),R=a.n(L);let X=e=>{let{field:t,fieldLabel:a,errors:r,touched:l,required:n,setFieldValue:i,children:o,formGroupClasses:c,onSelect:h}=e;return(0,s.jsxs)(d.cw,{row:!0,className:c,children:[(0,s.jsxs)(d.__,{for:t,lg:2,children:[a,n&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsxs)(d.JX,{lg:10,children:[(0,s.jsx)(d.BZ,{children:(0,s.jsx)(d.II,{type:"select",name:t,id:t,onChange:e=>h?h(e):i(t,e.target.value),required:!0,className:R()({"is-invalid":l[t]&&r[t]}),children:o})}),(0,s.jsx)(B.Bc,{name:t,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})]})};var F=a(70297),O=a(82625),A=a(37054);let H=["places"],J=e=>{let{field:t,fieldLabel:a,errors:r,touched:l,required:n,formGroupClasses:i,onSelect:o,options:c}=e,{isLoaded:h}=(0,A.Db)({googleMapsApiKey:"AIzaSyDqmAZBN1UdBwWUf33tX-XB1WDUw8jwL_E",libraries:H});return h&&(0,s.jsxs)(d.cw,{row:!0,className:i,children:[(0,s.jsxs)(d.__,{for:t,lg:2,children:[a,n&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsxs)(d.JX,{lg:10,children:[(0,s.jsx)(d.BZ,{children:(0,s.jsx)(O.default,{apiKey:"AIzaSyDqmAZBN1UdBwWUf33tX-XB1WDUw8jwL_E",onPlaceSelected:o,options:c,className:R()("form-control",{"is-invalid":l[t]&&r[t]})})}),(0,s.jsx)(B.Bc,{name:t,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})]})};var P=a(93607);let W=e=>{let{field:t,dayField:a,monthField:r,yearField:l,fieldLabel:n,dayPlaceholder:i,monthPlaceholder:o,yearPlaceholder:c,errors:h,touched:m,required:u}=e;return(0,s.jsxs)(d.cw,{row:!0,children:[(0,s.jsxs)(d.__,{for:t,lg:2,children:[n,u&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsxs)(d.JX,{lg:5,className:"d-flex",children:[(0,s.jsxs)("div",{className:"me-2",children:[(0,s.jsx)(d.II,{type:"number",name:a,id:a,tag:B.gN,required:!0,className:R()({"is-invalid":m[a]&&h[a]}),placeholder:i}),(0,s.jsx)(B.Bc,{name:a,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]}),(0,s.jsxs)("div",{className:"me-2",children:[(0,s.jsx)(d.II,{type:"number",name:r,id:r,tag:B.gN,required:!0,className:R()({"is-invalid":m[r]&&h[r]}),placeholder:o}),(0,s.jsx)(B.Bc,{name:r,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(d.II,{type:"number",name:l,id:l,tag:B.gN,required:!0,className:R()({"is-invalid":m[l]&&h[l]}),placeholder:c}),(0,s.jsx)(B.Bc,{name:l,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})]})]})},G=e=>{let{field:t,fieldLabel:a,errors:r,touched:l,required:n,labelClasses:i}=e;return(0,s.jsxs)(d.cw,{row:!0,className:"align-items-center",children:[(0,s.jsxs)(d.__,{className:"d-flex",for:t,lg:11,children:[(0,s.jsx)("div",{className:i,children:a}),n&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)(d.JX,{lg:1,children:(0,s.jsx)(d.BZ,{children:(0,s.jsx)(d.II,{type:"checkbox",name:t,id:t,tag:B.gN,required:!0,className:R()({"is-invalid":l[t]&&r[t]})})})}),(0,s.jsx)(B.Bc,{name:t,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})},U=e=>{let{field:t,fieldLabel:a,errors:r,touched:l,required:n,labelClasses:i,labelRole:o,labelOnClick:c}=e;return(0,s.jsxs)(d.cw,{row:!0,className:"align-items-center",children:[(0,s.jsxs)(d.__,{className:"d-flex",for:t,lg:11,children:[(0,s.jsx)("div",{role:o,className:i,onClick:e=>{e.preventDefault(),c&&c()},children:a}),n&&(0,s.jsx)("span",{className:"required-asterisk",children:"*"})]}),(0,s.jsx)(d.JX,{lg:1,children:(0,s.jsx)(d.BZ,{children:(0,s.jsx)(d.II,{type:"checkbox",name:t,id:t,tag:B.gN,required:!0,className:R()({"is-invalid":l[t]&&r[t]})})})}),(0,s.jsx)(B.Bc,{name:t,render:e=>(0,s.jsx)("small",{className:"text-danger",children:e})})]})},T=e=>{let{eventsSelected:t,daysSelected:a,type:l,router:i,modalIsOpen:c,setModalIsOpen:m,isAdmin:u}=e,{t:_}=(0,o.$G)("reservationForm"),[x,f]=(0,r.useState)(1),[g,v]=(0,r.useState)(4),[y,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!u){let e=g;0===t.length?e=4:t.forEach(t=>{let a=0;t.reservations.forEach(e=>{a+=e.customer_forms.length});let s=t.max_reservations-a;e=s}),v(e)}},[t]);let N=(e,s)=>{let{resetForm:r}=s,d=[...a];0===t.length?d=a.map(e=>(0,E.Z)(e,1)):a.forEach((e,a)=>{for(let s of t)((0,I.Z)((0,E.Z)(e,1),new Date(s.start))||(0,I.Z)((0,E.Z)(e,1),new Date(s.end)))&&delete d[a]});let o=d.filter(e=>e).filter(e=>!(0,b.Z)(e)).map(e=>(0,j.Z)(e)?{start:(0,h.Z)(new Date(e),"yyyy-MM-dd HH-mm-ss"),end:(0,h.Z)(new Date((0,p.Z)(e,1)),"yyyy-MM-dd HH-mm-ss")}:{start:(0,h.Z)(new Date(e),"yyyy-MM-dd HH-mm-ss"),end:(0,h.Z)(new Date(e),"yyyy-MM-dd HH-mm-ss")}),c=t.map(e=>e.id);e.forms.forEach(e=>{e.birthdate="".concat(e.birthdate.day.toString(),"/").concat(e.birthdate.month.toString(),"/").concat(e.birthdate.year.toString())});let m={...e,events:c,eventsDates:o,language:i.query.locale,type:l.value};u?n.If.store(m).then(()=>{r()}):n.Rz.createCheckoutSession(m).then(e=>{i.push(e.url)})},w=C.Ry().shape({forms:C.IX().of(C.Ry().shape({first_name:C.Z_().min(2,_("validation_too_short")).max(50,_("validation_too_long")).required(_("validation_required")),last_name:C.Z_().min(2,_("validation_too_short")).max(50,_("validation_too_long")).required(_("validation_required")),email:C.Z_().email(_("validation_email_invalid")).required(_("validation_required")),address:C.Z_().required(_("validation_required")),phone_number:C.Z_().matches(/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,_("validation_phone_number_invalid")).required(_("validation_required")),birthdate:C.Ry().shape({day:C.Rx().min(1,_("validation_birthdate_day_too_low")).max(31,_("validation_birthdate_day_too_high")).required(_("validation_required")),month:C.Rx().min(1,_("validation_birthdate_month_too_low")).max(12,_("validation_birthdate_month_too_high")).required(_("validation_required")),year:C.Rx().min(1900,_("validation_birthdate_year_too_low")).max((0,z.Z)(new Date)-17,_("validation_birthdate_year_too_high")).required(_("validation_required"))}),terms_accepted:C.O7().oneOf([!0],_("validation_required"))}))}),k=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.Z,{field:"forms.".concat(a,".first_name"),fieldLabel:_("first_name_label"),placeholder:_("first_name_placeholder"),errors:e,touched:t,required:!0}),(0,s.jsx)(F.Z,{field:"forms.".concat(a,".last_name"),fieldLabel:_("last_name_label"),placeholder:_("last_name_placeholder"),errors:e,touched:t,required:!0}),(0,s.jsx)(F.Z,{field:"forms.".concat(a,".email"),fieldLabel:_("email_label"),placeholder:_("email_placeholder"),errors:e,touched:t,required:!0}),(0,s.jsx)(J,{field:"forms.".concat(a,".address"),fieldLabel:_("address_label"),placeholder:_("address_placeholder"),errors:e,touched:t,required:!0,onSelect:e=>r("forms.".concat(a,".address"),e.formatted_address),options:{componentRestrictions:{country:"CA"},types:["address"]}}),(0,s.jsx)(P.Z,{field:"forms.".concat(a,".phone_number"),fieldLabel:_("phone_number_label"),placeholder:_("phone_number_placeholder"),errors:e,touched:t,required:!0}),(0,s.jsx)(W,{field:"forms.".concat(a,".birthdate"),dayField:"forms.".concat(a,".birthdate.day"),monthField:"forms.".concat(a,".birthdate.month"),yearField:"forms.".concat(a,".birthdate.year"),fieldLabel:_("birthdate_label"),dayPlaceholder:_("day_placeholder"),monthPlaceholder:_("month_placeholder"),yearPlaceholder:_("year_placeholder"),errors:e,touched:t,required:!0}),(l.value===D.initiation_sailing.value||l.value===D.beginner_skipper.value)&&(0,s.jsx)(G,{field:"forms.".concat(a,".has_manual"),fieldLabel:_("has_manual_label"),errors:e,touched:t}),l.value!==D.regatta.value&&(0,s.jsx)(G,{field:"forms.".concat(a,".has_logbook"),fieldLabel:_("has_logbook_label"),errors:e,touched:t}),l.value!==D.regatta.value&&(0,s.jsx)(G,{field:"forms.".concat(a,".has_exam"),fieldLabel:_("has_exam_label"),errors:e,touched:t}),(0,s.jsx)(U,{field:"forms.".concat(a,".terms_accepted"),fieldLabel:_("terms_accepted_label"),labelClasses:"text-decoration-underline",labelOnClick:()=>Z(!0),labelRole:"button",errors:e,touched:t,required:!0})]})},q=(e,t,a,r)=>{let l=[],n=[],i=x;a.forms.length<i&&(i=a.forms.length);for(let o=0;o<a.forms.length;o++)a.forms.length>1&&l.push((0,s.jsx)(d.LY,{role:"button",children:(0,s.jsx)(d.OL,{className:"".concat(x===o+1?"active":""),onClick:()=>f(o+1),children:_("person_tab_name_".concat(o))})},o)),n.push((0,s.jsx)(d.I5,{activeTab:i,children:(0,s.jsx)(d.Jm,{tabId:o+1,children:k(e,t,o,r)})},o));return(0,s.jsxs)(s.Fragment,{children:[l.length>1&&(0,s.jsx)(d.JL,{tabs:!0,className:"mb-5",children:l}),n]})},S=e=>{m(e=>!e),e()};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B.J9,{onSubmit:N,initialValues:{forms:[{first_name:"",last_name:"",email:"",address:"",phone_number:"",birthdate:{day:"",month:"",year:""},has_manual:!1,has_logbook:!1,has_exam:!1,terms_accepted:!1}],number_of_people:"1",type:"brevet_elementaire"},validationSchema:w,enableReinitialize:!0,children:e=>{let{isSubmitting:t,touched:a,errors:r,submitForm:l,setFieldValue:n,values:i,initialValues:o,resetForm:h}=e;return(0,s.jsxs)(d.u_,{isOpen:c,toggle:()=>S(h),size:"lg",children:[(0,s.jsx)(d.xB,{toggle:()=>S(h),children:_("registration")}),(0,s.jsx)(d.fe,{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B.l0,{children:(0,s.jsx)(B.F2,{name:"forms",render:e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(X,{field:"number_of_people",fieldLabel:_("number_of_people_label"),errors:r,touched:a,setFieldValue:n,required:!0,formGroupClasses:"mb-2",onSelect:t=>{if(t.target.value>i.number_of_people)for(let a=0;a<t.target.value-i.number_of_people;a++)e.push(o.forms[0]);else if(t.target.value<i.number_of_people)for(let a=0;a<i.number_of_people-t.target.value;a++)e.pop("");n("number_of_people",t.target.value)},children:[(0,s.jsx)("option",{disabled:g<1,children:"1"}),(0,s.jsx)("option",{disabled:g<2,children:"2"}),(0,s.jsx)("option",{disabled:g<3,children:"3"}),(0,s.jsx)("option",{disabled:g<4,children:"4"})]}),q(r,a,i,n)]})})}),t&&(0,s.jsx)("div",{className:"h-100 w-100 bg-light bg-opacity-10 mt-3",children:(0,s.jsx)("div",{className:"spinner-border",role:"status text-center"})})]})}),(0,s.jsxs)(d.mz,{children:[(0,s.jsx)(d.zx,{color:"primary",className:"me-2",disabled:t,onClick:()=>{var e;null===(e=r.forms)||void 0===e||e.forEach((e,t)=>{void 0!==e&&f(t+1)}),l()},children:_("book")}),(0,s.jsx)(d.zx,{color:"secondary",onClick:()=>S(h),children:_("cancel")})]})]})}}),(0,s.jsxs)(d.u_,{centered:!0,isOpen:y,toggle:()=>Z(e=>!e),size:"lg",children:[(0,s.jsx)(d.xB,{toggle:()=>Z(e=>!e),children:_("terms__accepted_label")}),(0,s.jsx)(d.fe,{className:"h4 my-3",children:_("terms_accepted_description")})]})]})},$=(e,t,a)=>{let s=[];e.forEach(e=>{t.forEach(t=>{((0,I.Z)((0,E.Z)(e,1),new Date(t.start))||(0,I.Z)((0,E.Z)(e,1),new Date(t.end)))&&s.push(t)})}),a(s.filter((e,t,a)=>a.findIndex(t=>t.id===e.id)===t))},K=(e,t)=>((null==t?void 0:t.value)!=="beginner_skipper"||4!==e.length)&&((null==t?void 0:t.value)!=="initiation_sailing"||2!==e.length)&&((null==t?void 0:t.value)!=="regatta"||5!==e.length),V=(e,t)=>{e([]),t([])};var Y=a(39059),Q=a.n(Y);a.e(775).then(a.t.bind(a,36775,23));let ee=e=>{let{events:t,className:a,daysSelected:n,setDaysSelected:i,type:g}=e,v=(0,l.useRouter)(),{t:y}=(0,o.$G)("reservations"),[Z,N]=(0,r.useState)(null),[q,S]=(0,r.useState)(!1),[D,I]=(0,r.useState)(4),{messages:E,formats:M}=(0,r.useMemo)(()=>({messages:{previous:y("previous"),next:y("next"),today:y("today")},formats:{monthHeaderFormat:(e,t,a)=>{let s=a.format(e,"MMMM yyyy",t);return s.charAt(0).toUpperCase()+s.slice(1)}}}),[]);(0,r.useEffect)(()=>{(null==g?void 0:g.value)==="beginner_skipper"?I(4):(null==g?void 0:g.value)==="initiation_sailing"&&I(2),(null==g?void 0:g.value)==="regatta"&&I(5)},[g]);let B=e=>{let t=e.event,a=[];return t.reservations.forEach(e=>e.customer_forms.forEach(e=>a.push("".concat(e.first_name," ").concat(e.last_name)))),(0,s.jsx)("div",{className:"d-flex flex-column align-items-start",children:(0,s.jsx)("div",{className:"d-flex flex-wrap",children:a.map((e,t)=>(0,s.jsx)("div",{className:"me-2 ".concat(Q().eventCustomers),children:e},t))})})},C=(0,r.useMemo)(()=>({event:B}),[]),z={en:w.Z,fr:k.Z},L=(0,c.lD)({format:h.Z,parse:u.Z,startOfWeek:()=>(0,_.Z)(new Date,{weekStartsOn:1}),getDay:x.Z,locales:z}),R=()=>({style:{textAlign:"center"}}),X=e=>{let t=[e.slots[0]];(0,j.Z)(t[0])?t=[t[0],(0,p.Z)(t[0],1)]:(0,b.Z)(t[0])&&(t=[t[0],(0,f.Z)(t[0],1)]);let a=[];if((a=t.length>1?(a=n.filter(e=>0!==(0,m.Z)(e,t[0]))).filter(e=>0!==(0,m.Z)(e,t[1])):n.filter(e=>0!==(0,m.Z)(e,t[0]))).length===n.length){if(n.length+t.length>D)return null;i(e=>e.concat(t))}else i(a)},F=e=>{let t=n.every(t=>0!==(0,m.Z)(t,e));return{style:{background:t?"":"#C1E1C1"}}},O=()=>{S(e=>!e)};return(0,s.jsxs)(d.W2,{className:"mt-4",children:[(0,s.jsx)(c.f,{events:t,className:a,localizer:L,style:{height:500},culture:v.query.locale,views:["month"],selectable:!0,eventPropGetter:R,components:C,onSelectEvent:e=>{N(e),S(!0)},onSelectSlot:X,dayPropGetter:F,messages:E,formats:M}),Z&&(0,s.jsxs)(d.u_,{isOpen:q,toggle:O,size:"lg",children:[(0,s.jsx)(d.xB,{toggle:O,children:Z.title_en}),(0,s.jsx)(d.fe,{children:(0,s.jsx)(d.X2,{children:Z.reservations.map(e=>(0,s.jsxs)(d.JX,{children:[(0,s.jsx)("div",{children:e.type}),(0,s.jsx)(d.X2,{children:e.customer_forms.map(e=>{let{id:t,first_name:a,last_name:r,email:l,phone_number:n,address:i,birthdate:o}=e;return(0,s.jsxs)(d.JX,{children:[(0,s.jsx)("div",{children:a}),(0,s.jsx)("div",{children:r}),(0,s.jsx)("div",{children:l}),(0,s.jsx)("div",{children:n}),(0,s.jsx)("div",{children:i}),(0,s.jsx)("div",{children:o})]},t)})})]},e.id))})}),(0,s.jsx)(d.mz,{})]})]})};var et=a(4179);let ea=e=>{let{isAdmin:t}=e,a=(0,l.useRouter)(),{t:c}=(0,o.$G)("reservations"),[h,m]=(0,r.useState)([]),[u,_]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[f,g]=(0,r.useState)([]),[v,j]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),[Z,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)({value:D.beginner_skipper.value,label:c(D.beginner_skipper.label),days:D.beginner_skipper.days}),q=[{value:D.beginner_skipper.value,label:c(D.beginner_skipper.label),days:D.beginner_skipper.days},{value:D.initiation_sailing.value,label:c(D.initiation_sailing.label),days:D.initiation_sailing.days},{value:D.regatta.value,label:c(D.regatta.label),days:D.regatta.days}];(0,r.useEffect)(()=>{var e;let t=null===(e=a.query)||void 0===e?void 0:e.type;t&&k(q.filter(e=>e.value===t)[0])},[a]),(0,r.useEffect)(()=>{let e=new URLSearchParams(window.location.search);e.get("success")&&N(!0),e.get("canceled")&&console.log("Order canceled -- continue to shop around and checkout when youâ€™re ready.")},[]),(0,r.useEffect)(()=>{let e=t?n.If.index():n.If.eventsCalendar();e.then(e=>{let{data:t}=e;return p(t)})},[]),(0,r.useEffect)(()=>{if(x.length>0){let e=x.map(e=>({id:e.id,start:e.start,end:e.end,title_en:e.title_en,title_fr:e.title_fr,reservations:e.reservations,max_reservations:e.max_reservations}));g(e)}},[x]);let S=()=>{N(e=>!e),a.push("/reservations",void 0,{shallow:!0})};return(0,s.jsxs)(d.W2,{className:"mt-5",children:[(0,s.jsx)("h1",{className:"mb-4",children:c("page_title")}),(0,s.jsx)("div",{children:c("type")}),(0,s.jsx)(i.ZP,{name:"type",id:"type",instanceId:"type",options:q,onChange:e=>{k(e),V(m,_)},value:w,styles:{menu:e=>({...e,zIndex:1e3})}}),(0,s.jsxs)("ul",{className:"mt-4",children:[(0,s.jsx)("li",{children:c("helper_text_select_days",{count:w.days,days:w.days})}),(0,s.jsxs)("li",{children:[c("helper_text_contact_us_description_1"),(0,s.jsx)(et.Z,{href:"/contact-us",children:c("helper_text_contact_us_link")}),c("helper_text_contact_us_description_2")]}),(0,s.jsx)("li",{children:c("helper_text_available_months")}),b&&(0,s.jsx)("li",{className:"text-danger",children:c("helper_text_too_many_days_error")})]}),t?(0,s.jsx)(ee,{events:f,daysSelected:h,setDaysSelected:m,type:w}):(0,s.jsx)(M,{events:f,daysSelected:h,setDaysSelected:m,type:w,setTooManyDaysError:y}),(0,s.jsx)(d.zx,{color:"primary",className:"mt-5 w-100",disabled:K(h,w),onClick:()=>{j(e=>!e),$(h,x,_)},children:c("book_now")}),(0,s.jsx)(T,{daysSelected:h,eventsSelected:u,type:w,router:a,modalIsOpen:v,setModalIsOpen:j,isAdmin:t}),(0,s.jsxs)(d.u_,{centered:!0,isOpen:Z,toggle:S,size:"lg",children:[(0,s.jsx)(d.xB,{toggle:S,children:c("booking_success_title")}),(0,s.jsx)(d.fe,{className:"h4 my-3",children:c("booking_success_description")})]})]})};var es=ea},13125:function(e,t,a){"use strict";a.d(t,{H6:function(){return j},If:function(){return i},Ws:function(){return y},Rz:function(){return o},KH:function(){return _}});var s=a(46509);let r=()=>s.Z.get("/events").then(e=>e.data),l=()=>s.Z.get("/events/calendar").then(e=>e.data),n=e=>s.Z.post("/events",e).then(e=>e.data);var i={index:r,store:n,eventsCalendar:l};let d=e=>s.Z.post("/create-checkout-session",e).then(e=>e.data);var o={createCheckoutSession:d};let c=()=>s.Z.get("/todos").then(e=>e.data),h=e=>s.Z.post("/todos",e).then(e=>e.data),m=(e,t)=>s.Z.put("/todos/".concat(e),t).then(e=>e.data),u=e=>s.Z.delete("todos/".concat(e));var _={index:c,store:h,update:m,deleteTodo:u};let x=()=>s.Z.get("/allowed-skippers").then(e=>e.data),p=(e,t)=>s.Z.get("/allowed-skippers/datatable",{params:{page:e,per_page:t}}).then(e=>e.data),f=e=>s.Z.post("/allowed-skippers",e).then(e=>e.data),g=(e,t)=>s.Z.put("/allowed-skippers/".concat(e),t).then(e=>e.data),v=e=>s.Z.delete("allowed-skippers/".concat(e));var j={index:x,datatable:p,store:f,update:g,deleteTodo:v};let b=e=>s.Z.post("/mail/send-contact-us-email",e).then(e=>e.data);var y={sendContactUsEmail:b}},39059:function(e){e.exports={eventCustomers:"AdminCalendar_eventCustomers__khgzR"}}}]);